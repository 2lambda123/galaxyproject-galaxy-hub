extends layout.pug

mixin renderResourceRow(item, with_scope)
    tr
        td
            div( style="padding-left: 0.5em; text-indent: -0.5em;")
                a( href=item.link ) #{item.title}
        if with_scope
            td
                != scopeTagToHTML(item.scope)
        td
            each platform in item.platforms
                div( style="padding-left: 0.5em; text-indent: -0.5em;")
                    a( href=deGitUrl(platform.platform_url) ) #{platformGroupTagToText(platform.platform_group)}
                    br
        td !{helpers.marked(item.summary).replace("<p>","").replace("</p>","")}

block content
    - var resources_malleable = use.slice().sort( function(a,b){return a.title.toLowerCase().localeCompare(b.title.toLowerCase())} )
    div.col-md-12
        section.section-content
            h1 !{title}
            div !{ contents }

            h2(id="everthing") All Resources
            p
                | Complete listing of resources for using Galaxy. 
            table.table.table-striped
                thead
                    tr
                        th Resource
                        th Scope
                        th Platform(s)
                        th Summary
                tbody
                    each item in resources_malleable
                        +renderResourceRow(item, true)

            h2(id="usegalaxy") UseGalaxy Servers
            p
                a(href="/usegalaxy/") UseGalaxy servers 
                | implement a common core set of tools and reference genomes, and are open to anyone to use.  They also contain tools and genomes that are local to each server. Each is backed by significant computational resources and they are excellent places to get started with Galaxy, and to share and publish your results. 
            table.table.table-striped
                thead
                    tr
                        th Resource
                        th Platform(s)
                        th Summary
                tbody
                    each item in resources_malleable
                        if item.scope == "usegalaxy"
                            +renderResourceRow(item, false)

            h2(id="general") General Purpose / Genomics Galaxy Servers
            p These servers implement a broad range of tools and aren't specific to any part of the tree of life, or to any specific type of analysis. These are servers you can use when want to do general genomic analysis.
            table.table.table-striped
                thead
                    tr
                        th Resource
                        th Platform(s)
                        th Summary
                tbody
                    each item in resources_malleable
                        if item.scope == "general"
                            +renderResourceRow(item, false)

            h2(id="domain") Domain Specific Galaxy Servers
            p Domain servers specialize in either a particular branch of the tree of life or in particular types of analysis. However, within their specializations, domain servers offer a wide variety of tools.
            table.table.table-striped
                thead
                    tr
                        th Resource
                        th Platform(s)
                        th Summary
                tbody
                    each item in resources_malleable
                        if item.scope == "domain"
                            +renderResourceRow(item, false)

            h2(id="tool-publishing") Tool Publishing Galaxy Servers
            p Tool publishing servers expose one or a few tools so that researchers can use the tools without having to install them locally or use command line.

            p The distinction between domain servers and tool publishing servers is fuzzy. In general, tool publishing servers expose tools from a particular organization, while domain servers include tools / datasets from other organizations and have a larger goal in mind.
            table.table.table-striped
                thead
                    tr
                        th Resource
                        th Platform(s)
                        th Summary
                tbody
                    each item in resources_malleable
                        if item.scope == "tool-publishing"
                            +renderResourceRow(item, false)
