extends layout.pug

block content
    div.col-md-12
        section.section-content
            h1 !{ title }
            div !{ contents }

            table.table.table-striped
                thead
                    tr
                        th Date
                        th Author(s)
                        th Topic
                tbody
                    each item in personal_blog
                        tr
                            td: span.text-nowrap #{helpers.moment(item.date).format("MMMM Do YYYY")}
                            td
                                | #{item.authors}
                                if item.source_blog_url || item.source_blog || item.link.startsWith("/people/")
                                    p(style="margin-left: 1em")
                                        i From 
                                            if item.source_blog_url
                                                a(href=item.source_blog_url)
                                                    if item.source_blog
                                                        | !{item.source_blog}
                                                    else
                                                        | this blog
                                            else if item.link.startsWith("/people/")
                                                if item.source_blog
                                                    a(href=(item.link.substring(0, item.link.indexOf("blog/") + 5)))
                                                        | !{item.source_blog}
                                                else
                                                    a(href=(item.link.substring(0, item.link.indexOf("blog/") + 5)))
                                                        | !{item.authors}'s Galaxy blog
                                            else if item.source.blog
                                                | !{item.source_blog}
                            td
                                if item.external_url
                                    a.lead( href=item.external_url ) #{item.title}
                                    if item.contents != ''
                                        |  [
                                        a( href=item.link )
                                            | hub page
                                        | ]
                                else
                                    a.lead( href=item.link ) #{item.title}
                                p
                                    if item.tease
                                        | #{item.tease}
                                    else
                                        | !{helpers._.replace(helpers._.replace(helpers.marked(item.contents), /(<.+?\>|&nbsp;)/g, ''),/\s+/g,' ').slice(0,80) + "..."}
            h2(id="add-news-item") Adding a blog entry
            p
                | To add a blog entry, create a new folder in 
                a(href="https://github.com/galaxyproject/galaxy-hub/tree/master/src/blog") https://github.com/galaxyproject/galaxy-hub/tree/master/src/blog
                |  with an 'index.md' file.  It's probably easiest to copy the format from one of the other existing blog entries.
